<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>T·∫øt ·∫§t T·ªµ 2026 - L√¨ X√¨ Free Fire</title>
    <style>
      :root {
        --gold: #ffd700;
        --glass: rgba(15, 15, 20, 0.9);
        --neon-blue: #00ffff;
      }

      body {
        margin: 0;
        padding: 0;
        background: #000;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        color: white;
        overflow: hidden;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        width: 100vw;
      }

      canvas {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 1;
      }

      /* --- KHUNG CH·ª®A UI --- */
      .card {
        width: 85%;
        max-width: 380px;
        background: var(--glass);
        backdrop-filter: blur(15px);
        border: 2px solid var(--gold);
        border-radius: 20px;
        padding: 25px 20px;
        text-align: center;
        z-index: 10;
        box-shadow: 0 0 40px rgba(255, 215, 0, 0.25);

        display: none; /* ·∫®n m·∫∑c ƒë·ªãnh ch·ªù 30s */
        flex-direction: column;
        justify-content: center;
        min-height: 420px;
        opacity: 0;
        transition: opacity 1s ease-in;
      }

      .card.show {
        display: flex;
        opacity: 1;
        animation: floatUp 0.8s ease-out;
      }

      @keyframes floatUp {
        from {
          transform: translateY(40px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      /* --- TI√äU ƒê·ªÄ --- */
      .hpny-text {
        font-size: 2.2rem;
        font-weight: 900;
        background: linear-gradient(to bottom, #ffd700, #ff8c00);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        margin-bottom: 15px;
        text-transform: uppercase;
        line-height: 1.1;
        text-shadow: 0 2px 15px rgba(255, 215, 0, 0.4);
        opacity: 0;
        transform: scale(0.5);
        transition: all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
      }

      .hpny-text.animate {
        opacity: 1;
        transform: scale(1);
      }

      /* --- PH·∫¶N L·ªúI CH√öC --- */
      #wish-container {
        min-height: 140px;
        background: rgba(255, 255, 255, 0.08);
        border-radius: 15px;
        padding: 20px 15px;
        margin: 15px 0 25px 0;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 1px dashed rgba(255, 215, 0, 0.3);
      }

      #wish-text {
        font-size: 1.2rem;
        line-height: 1.6;
        letter-spacing: 0.5px;
        color: #fffacd;
        font-weight: 500;
        text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.8);
        text-align: center;
        white-space: pre-line; /* ƒê·ªÉ hi·ªÉn th·ªã xu·ªëng d√≤ng */
      }

      /* --- N√öT B·∫§M --- */
      button {
        border: none;
        padding: 16px;
        font-weight: bold;
        border-radius: 50px;
        font-size: 1.1rem;
        cursor: pointer;
        text-transform: uppercase;
        width: 100%;
        letter-spacing: 1px;
      }

      .btn-lixi {
        background: linear-gradient(135deg, #e60000, #ff4d4d);
        color: #fff;
        box-shadow: 0 5px 20px rgba(255, 0, 0, 0.4);
        animation: pulse 1.5s infinite;
        opacity: 0;
        transform: translateY(20px);
        transition: all 0.5s ease;
        pointer-events: none;
      }

      .btn-lixi.show-btn {
        opacity: 1;
        transform: translateY(0);
        pointer-events: auto;
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.03);
        }
        100% {
          transform: scale(1);
        }
      }

      .hidden {
        display: none !important;
      }

      /* --- UI L√å X√å --- */
      .lixi-wrap {
        display: flex;
        justify-content: center;
        align-items: center;
        margin-top: 20px;
        height: 200px;
      }
      .lixi-img {
        width: 120px; /* L·ªõn h∆°n v√¨ ch·ªâ c√≥ 1 c√°i */
        cursor: pointer;
        animation: shake 3s infinite ease-in-out;
        transition: transform 0.3s;
      }
      .lixi-img:hover {
        transform: scale(1.1) rotate(10deg);
      }

      @keyframes shake {
        0%,
        100% {
          transform: rotate(0deg);
        }
        10%,
        30% {
          transform: rotate(-5deg);
        }
        20%,
        40% {
          transform: rotate(5deg);
        }
      }

      /* --- UI PH·∫¶N TH∆Ø·ªûNG --- */
      .prize-text {
        font-size: 1.6rem;
        color: var(--neon-blue);
        margin: 20px 0;
        text-shadow: 0 0 15px var(--neon-blue);
        border: 2px dashed var(--neon-blue);
        padding: 20px;
        border-radius: 15px;
        background: rgba(0, 255, 255, 0.08);
        font-weight: 800;
        line-height: 1.4;
      }

      input {
        padding: 15px;
        width: 100%;
        box-sizing: border-box;
        margin: 15px 0;
        border-radius: 12px;
        border: 2px solid var(--gold);
        background: #fff;
        font-size: 1.1rem;
        text-align: center;
        color: #000;
      }

      .btn-confirm {
        background: linear-gradient(135deg, #ffd700, #ff8c00);
        color: #000;
        box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
      }

      /* --- UI SUCCESS --- */
      .success-msg {
        font-size: 1.2rem;
        color: #7aff7a;
        margin-top: 20px;
        line-height: 1.6;
        text-shadow: 0 0 10px rgba(0, 255, 0, 0.5);
      }
    </style>
  </head>
  <body>
    <canvas id="fireworks"></canvas>

    <div class="card">
      <div id="wish-ui">
        <div id="hpny-title" class="hpny-text">CH√öC M·ª™NG<br />NƒÇM M·ªöI 2026</div>

        <div id="wish-container">
          <div id="wish-text"></div>
        </div>

        <button id="btn-get-lixi" class="btn-lixi" onclick="goToLixi()">
          üßß NH·∫¨N L√å X√å NGAY üßß
        </button>
      </div>

      <div id="lixi-ui" class="hidden">
        <p
          style="
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: #ffd700;
            font-weight: bold;
          "
        >
          B·∫§M ƒê·ªÇ M·ªû QU√Ä
        </p>
        <div class="lixi-wrap">
          <div onclick="openGift()" style="font-size: 120px">üßß</div>
        </div>
      </div>

      <div id="gift-ui" class="hidden">
        <p
          style="
            font-size: 1.2rem;
            font-weight: bold;
            color: #ffd700;
            margin-bottom: 5px;
          "
        >
          üéâ QU√Ä NƒÇM M·ªöI C·ª¶A B·∫†N üéâ
        </p>
        <div class="prize-text">TH·∫∫ V√î C·ª∞C<br />SONG NG∆Ø</div>
        <p style="font-size: 0.95rem; opacity: 0.8">
          Nh·∫≠p ID game ƒë·ªÉ nh·∫≠n qu√† v·ªÅ h·ªôp th∆∞
        </p>
        <input
          type="number"
          id="uid"
          placeholder="Nh·∫≠p ID Game (VD: 12345678)"
        />
        <button class="btn-confirm" onclick="confirmGift()">
          X√ÅC NH·∫¨N NH·∫¨N QU√Ä
        </button>
      </div>

      <div id="success-ui" class="hidden">
        <div style="font-size: 4rem; margin-bottom: 10px">üéâ</div>
        <h2 style="color: #ffd700; margin: 0">Ch√∫c m·ª´ng nƒÉm m·ªõi</h2>
        <div class="success-msg">
          Ch√∫c m·ª´ng nƒÉm m·ªõi Li√™n Chan<br />
          Kim c∆∞∆°ng s·∫Ω ƒë∆∞·ª£c g·ª≠i v√†o nik c·ªßa b·∫°n sau 24h<br />
          <b>HAPPY NEW YEAR!</b>
        </div>
      </div>
    </div>

    <script>
      // === C·∫§U H√åNH C∆† B·∫¢N ===
      const burstSounds = [
        "Fireworks 2.mp3",
        "Fireworks 4.mp3",
        "Fireworks 7.mp3",
      ];

      const canvas = document.getElementById("fireworks");
      const ctx = canvas.getContext("2d");
      const card = document.querySelector(".card");

      let width, height;
      let fireworks = [];
      let particles = [];

      const palettes = [
        { h: 50, s: 100, l: 60 }, // Gold
        { h: 0, s: 100, l: 60 }, // Red
        { h: 180, s: 100, l: 50 }, // Cyan
        { h: 300, s: 100, l: 50 }, // Purple
      ];

      function setSize() {
        width = window.innerWidth;
        height = window.innerHeight;
        canvas.width = width;
        canvas.height = height;
      }
      window.addEventListener("resize", setSize);
      setSize();

      function playSound() {
        const randomIndex = Math.floor(Math.random() * burstSounds.length);
        const audio = new Audio(burstSounds[randomIndex]);
        audio.volume = 0.6;
        audio.play().catch(() => {});
      }

      // === CLASS H·∫†T PH√ÅO ===
      class Particle {
        constructor(x, y, hue, type) {
          this.x = x;
          this.y = y;
          this.hue = hue;
          this.type = type;
          const angle = Math.random() * Math.PI * 2;
          const speed = Math.random() * 5 + 2;
          this.vx = Math.cos(angle) * speed;
          this.vy = Math.sin(angle) * speed;
          this.friction = 0.96;
          this.gravity = 0.15;
          this.alpha = 1;
          this.decay = Math.random() * 0.015 + 0.01;
          this.brightness = Math.random() * 20 + 50;
        }
        update() {
          this.vx *= this.friction;
          this.vy *= this.friction;
          this.vy += this.gravity;
          this.x += this.vx;
          this.y += this.vy;
          this.alpha -= this.decay;
          if (Math.random() < 0.1) this.brightness = 100;
          else this.brightness = 50;
        }
        draw() {
          ctx.globalAlpha = this.alpha;
          ctx.fillStyle = `hsl(${this.hue}, 100%, ${this.brightness}%)`;
          ctx.beginPath();
          ctx.arc(
            this.x,
            this.y,
            this.type === "heavy" ? 2.5 : 1.5,
            0,
            Math.PI * 2,
          );
          ctx.fill();
          ctx.globalAlpha = 1;
        }
      }

      // === CLASS QU·∫¢ PH√ÅO ===
      class Firework {
        constructor(sx, sy, tx, ty, type = "normal") {
          this.x = sx;
          this.y = sy;
          this.sx = sx;
          this.sy = sy;
          this.tx = tx;
          this.ty = ty;
          this.type = type;
          this.distanceToTarget = Math.sqrt(
            Math.pow(tx - sx, 2) + Math.pow(ty - sy, 2),
          );
          this.distanceTraveled = 0;
          this.angle = Math.atan2(ty - sy, tx - sx);
          this.speed = 12;
          this.acceleration = 1.02;
          const p = palettes[Math.floor(Math.random() * palettes.length)];
          this.hue = p.h;
        }
        update() {
          this.speed *= this.acceleration;
          const vx = Math.cos(this.angle) * this.speed;
          const vy = Math.sin(this.angle) * this.speed;
          this.distanceTraveled = Math.sqrt(
            Math.pow(this.x - this.sx, 2) + Math.pow(this.y - this.sy, 2),
          );
          if (this.distanceTraveled >= this.distanceToTarget) {
            this.explode();
            return false;
          }
          this.x += vx;
          this.y += vy;
          return true;
        }
        draw() {
          ctx.beginPath();
          ctx.moveTo(
            this.x - Math.cos(this.angle) * 10,
            this.y - Math.sin(this.angle) * 10,
          );
          ctx.lineTo(this.x, this.y);
          ctx.strokeStyle = `hsl(${this.hue}, 100%, 50%)`;
          ctx.lineWidth = 3;
          ctx.stroke();
        }
        explode() {
          playSound();
          if (this.type === "heart") {
            this.createHeartShape();
          } else if (this.type === "ring") {
            this.createRingShape();
          } else {
            this.createNormalShape();
          }
        }
        createNormalShape() {
          for (let i = 0; i < 80; i++) {
            particles.push(new Particle(this.x, this.y, this.hue, "normal"));
          }
        }
        createHeartShape() {
          for (let i = 0; i < 60; i++) {
            const t = (Math.PI * 2 * i) / 60;
            const dx = 16 * Math.pow(Math.sin(t), 3);
            const dy = -(
              13 * Math.cos(t) -
              5 * Math.cos(2 * t) -
              2 * Math.cos(3 * t) -
              Math.cos(4 * t)
            );
            const p = new Particle(this.x, this.y, 0, "heavy");
            p.vx = dx * 0.15;
            p.vy = dy * 0.15;
            p.decay = 0.01;
            particles.push(p);
          }
        }
        createRingShape() {
          for (let i = 0; i < 50; i++) {
            const angle = (Math.PI * 2 * i) / 50;
            const p = new Particle(this.x, this.y, this.hue, "normal");
            const s = 4;
            p.vx = Math.cos(angle) * s;
            p.vy = Math.sin(angle) * s;
            particles.push(p);
          }
        }
      }

      // === V√íNG L·∫∂P ANIMATION ===
      function loop() {
        ctx.globalCompositeOperation = "destination-out";
        ctx.fillStyle = "rgba(0, 0, 0, 0.2)";
        ctx.fillRect(0, 0, width, height);
        ctx.globalCompositeOperation = "lighter";
        for (let i = fireworks.length - 1; i >= 0; i--) {
          if (!fireworks[i].update()) fireworks.splice(i, 1);
          else fireworks[i].draw();
        }
        for (let i = particles.length - 1; i >= 0; i--) {
          particles[i].update();
          if (particles[i].alpha <= 0) particles.splice(i, 1);
          else particles[i].draw();
        }
        requestAnimationFrame(loop);
      }
      loop();

      // === K·ªäCH B·∫¢N ƒê·∫†O DI·ªÑN ===
      let startTime = Date.now();
      let mode = "intro";

      function launchFirework(type = "normal", startX = null) {
        const sx = startX !== null ? startX : Math.random() * width;
        const sy = height;
        const tx = Math.random() * (width * 0.6) + width * 0.2;
        const ty = Math.random() * (height * 0.5) + 50;
        fireworks.push(new Firework(sx, sy, tx, ty, type));
      }

      let scriptInterval = setInterval(() => {
        let elapsed = Date.now() - startTime;
        if (mode === "ui_active") {
          if (Math.random() < 0.08) launchFirework("normal");
          return;
        }
        // K·ªãch b·∫£n 30 gi√¢y (Nhi·ªÅu ph√°o hoa)
        if (elapsed < 5000) {
          if (Math.random() < 0.15) launchFirework("normal");
        } else if (elapsed < 12000) {
          if (Math.random() < 0.25) {
            launchFirework("normal", width * 0.1);
            setTimeout(() => launchFirework("normal", width * 0.9), 150);
          }
        } else if (elapsed < 20000) {
          if (Math.random() < 0.15) launchFirework("heart");
          if (Math.random() < 0.15) launchFirework("ring");
        } else if (elapsed < 28000) {
          if (Math.random() < 0.5) launchFirework("normal");
        }
      }, 100);

      // === LOGIC GAME M·ªöI ===
      setTimeout(() => {
        mode = "ui_active";
        card.classList.add("show");
        startNewYearScript();
      }, 30000);

      // B√†i th∆° L·ª•c B√°t (Chia th√†nh t·ª´ng c·∫∑p c√¢u)
      const poem = [
        "Ch√∫c Li√™n Chan c√≥ m·ªôt nƒÉm m·ªõi th·∫≠t vui,",
        "Lu√¥n xinh ƒë·∫πp v√† t·ªèa s√°ng nh∆∞ √°nh n·∫Øng mai.",

        "ƒê·∫ßu nƒÉm nh·∫≠n l·ªôc, qu√† t·∫∑ng ng·∫≠p tr√†n,",
        "",
      ];

      async function startNewYearScript() {
        setTimeout(() => {
          document.getElementById("hpny-title").classList.add("animate");
        }, 500);

        const wishEl = document.getElementById("wish-text");

        // H√†m hi·ªÉn th·ªã t·ª´ng c·∫∑p c√¢u
        for (let i = 0; i < poem.length; i += 2) {
          await typeLine(poem[i], wishEl); // C√¢u l·ª•c
          wishEl.innerHTML += "<br>"; // Xu·ªëng d√≤ng
          await typeLine(poem[i + 1], wishEl); // C√¢u b√°t

          // D·ª´ng 2.5 gi√¢y ƒë·ªÉ ƒë·ªçc
          await new Promise((r) => setTimeout(r, 2500));

          // N·∫øu ch∆∞a ph·∫£i c·∫∑p cu·ªëi th√¨ x√≥a ƒë·ªÉ hi·ªán c·∫∑p m·ªõi
          if (i < poem.length - 2) {
            wishEl.innerHTML = "";
          }
        }

        // Hi·ªán n√∫t sau khi ch·∫°y h·∫øt th∆°
        document.getElementById("btn-get-lixi").classList.add("show-btn");
      }

      // H√†m ch·∫°y hi·ªáu ·ª©ng g√µ ch·ªØ
      function typeLine(text, element) {
        return new Promise((resolve) => {
          let i = 0;
          let typing = setInterval(() => {
            element.innerHTML += text.charAt(i);
            i++;
            if (i >= text.length) {
              clearInterval(typing);
              resolve();
            }
          }, 50); // T·ªëc ƒë·ªô g√µ
        });
      }

      function goToLixi() {
        document.getElementById("wish-ui").classList.add("hidden");
        document.getElementById("lixi-ui").classList.remove("hidden");
        document.getElementById("hpny-title").innerText = "üßß L·ªòC XU√ÇN üßß";
      }

      function openGift() {
        // M·ªü l√¨ x√¨
        for (let k = 0; k < 12; k++) {
          setTimeout(() => {
            launchFirework(k % 2 === 0 ? "heart" : "ring");
          }, k * 150);
        }
        document.getElementById("lixi-ui").classList.add("hidden");
        document.getElementById("gift-ui").classList.remove("hidden");
      }

      function confirmGift() {
        const uid = document.getElementById("uid").value;
        if (!uid) {
          alert("B·∫°n qu√™n nh·∫≠p ID k√¨a!");
          return;
        }

        // ·∫®n b·∫£ng nh·∫≠p, hi·ªán b·∫£ng ch√∫c m·ª´ng
        document.getElementById("gift-ui").classList.add("hidden");
        document.getElementById("success-ui").classList.remove("hidden");
        document.getElementById("hpny-title").innerText = "TH√ÄNH C√îNG";

        // B·∫Øn ph√°o hoa ƒÉn m·ª´ng l·ªõn
        for (let k = 0; k < 15; k++) {
          setTimeout(() => {
            launchFirework("normal");
          }, k * 100);
        }
      }
    </script>
  </body>
</html>
